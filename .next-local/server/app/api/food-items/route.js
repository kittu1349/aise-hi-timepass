"use strict";(()=>{var e={};e.id=228,e.ids=[228],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},17228:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>j,patchFetch:()=>k,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>y});var o={};r.r(o),r.d(o,{GET:()=>l,POST:()=>p,dynamic:()=>c});var a=r(95419),s=r(69108),n=r(99678),i=r(78070),u=r(9108),d=r(43729);let c="force-dynamic";async function l(e){try{let{userId:t}=(0,d.u)(!0),r=e.nextUrl.searchParams.get("q")?.trim()||"";if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let o=await u._.foodItem.findMany({where:{userId:t,...r?{name:{contains:r,mode:"insensitive"}}:{}},orderBy:{name:"asc"},take:50});return i.Z.json(o)}catch(e){return i.Z.json({error:"Failed to fetch food items"},{status:500})}}async function p(e){try{let{userId:t,setCookie:r}=(0,d.u)(),{name:o,caloriesPer100g:a,protein:s=0,carbs:n=0,fat:c=0,fiber:l=0,sugar:p=0,sodium:m=0}=await e.json();if(!o||"number"!=typeof a)return i.Z.json({error:"Invalid payload"},{status:400});if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let f=await u._.foodItem.create({data:{name:o,caloriesPer100g:a,protein:s,carbs:n,fat:c,fiber:l,sugar:p,sodium:m,userId:t}}),h=i.Z.json(f,{status:201});return r&&h.cookies.set("uid",t,{httpOnly:!0,sameSite:"lax",maxAge:31536e3}),h}catch(e){return i.Z.json({error:"Failed to create food item"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/food-items/route",pathname:"/api/food-items",filename:"route",bundlePath:"app/api/food-items/route"},resolvedPagePath:"C:\\Users\\kittu\\OneDrive\\Desktop\\deficit tracker\\nextjs\\app\\api\\food-items\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:x,headerHooks:g,staticGenerationBailout:y}=m,j="/api/food-items/route";function k(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},9108:(e,t,r)=>{r.d(t,{_:()=>a});let o=require("@prisma/client"),a=globalThis.prisma??new o.PrismaClient({log:["error"]})},43729:(e,t,r)=>{r.d(t,{u:()=>a});var o=r(32455);function a(e=!1){let t=(0,o.cookies)(),r=t.get("uid")?.value;return r?{userId:r,setCookie:!1}:e?{userId:globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),setCookie:!0}:{userId:null,setCookie:!1}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206,455],()=>r(17228));module.exports=o})();