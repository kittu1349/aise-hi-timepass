"use strict";(()=>{var e={};e.id=614,e.ids=[614],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},93489:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>y,originalPathname:()=>j,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>x});var o={};r.r(o),r.d(o,{GET:()=>l,POST:()=>p,dynamic:()=>c});var n=r(95419),a=r(69108),s=r(99678),i=r(78070),u=r(9108),d=r(43729);let c="force-dynamic";async function l(e){try{let{userId:t}=(0,d.u)(!1);if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let r=e.nextUrl.searchParams.get("date"),o={userId:t};if(r){let e=new Date(r),t=new Date(r);t.setDate(t.getDate()+1),o.date={gte:e,lt:t}}let n=await u._.foodEntry.findMany({where:o,include:{foodItem:!0},orderBy:{createdAt:"desc"}});return i.Z.json(n)}catch(e){return i.Z.json({error:"Failed to fetch entries"},{status:500})}}async function p(e){try{let{userId:t}=(0,d.u)(!1);if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let{date:r,foodItemId:o,quantity:n}=await e.json();if(!r||!o||"number"!=typeof n)return i.Z.json({error:"Invalid payload"},{status:400});let a=await u._.foodItem.findFirst({where:{id:o,userId:t}});if(!a)return i.Z.json({error:"Food not found"},{status:404});let s=a.caloriesPer100g*n/100,c=await u._.foodEntry.create({data:{date:new Date(r),quantity:n,totalCalories:s,userId:t,foodItemId:o},include:{foodItem:!0}});return i.Z.json(c,{status:201})}catch(e){return i.Z.json({error:"Failed to create entry"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/food-entries/route",pathname:"/api/food-entries",filename:"route",bundlePath:"app/api/food-entries/route"},resolvedPagePath:"C:\\Users\\kittu\\OneDrive\\Desktop\\deficit tracker\\nextjs\\app\\api\\food-entries\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:y,staticGenerationBailout:x}=f,j="/api/food-entries/route";function v(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},9108:(e,t,r)=>{r.d(t,{_:()=>n});let o=require("@prisma/client"),n=globalThis.prisma??new o.PrismaClient({log:["error"]})},43729:(e,t,r)=>{r.d(t,{u:()=>n});var o=r(32455);function n(e=!1){let t=(0,o.cookies)(),r=t.get("uid")?.value;return r?{userId:r,setCookie:!1}:e?{userId:globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),setCookie:!0}:{userId:null,setCookie:!1}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206,455],()=>r(93489));module.exports=o})();