"use strict";(()=>{var e={};e.id=917,e.ids=[917],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},49483:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>w,patchFetch:()=>f,requestAsyncStorage:()=>y,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>k,staticGenerationBailout:()=>g});var o={};r.r(o),r.d(o,{GET:()=>l,POST:()=>d,dynamic:()=>p});var a=r(95419),s=r(69108),n=r(99678),i=r(78070),u=r(9108),c=r(43729);let p="force-dynamic";async function l(e){try{let{userId:t}=(0,c.u)(!0),r=e.nextUrl.searchParams.get("q")?.trim()||"";if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let o=await u._.workoutType.findMany({where:{userId:t,...r?{name:{contains:r,mode:"insensitive"}}:{}},orderBy:{name:"asc"},take:50});return i.Z.json(o)}catch(e){return i.Z.json({error:"Failed to fetch workout types"},{status:500})}}async function d(e){try{let{userId:t,setCookie:r}=(0,c.u)(),{name:o,category:a,caloriesPerMin:s,description:n}=await e.json();if(!o||!a||"number"!=typeof s)return i.Z.json({error:"Invalid payload"},{status:400});if(!t)return i.Z.json({error:"Unauthorized"},{status:401});let p=await u._.workoutType.create({data:{name:o,category:a,caloriesPerMin:s,description:n,userId:t}}),l=i.Z.json(p,{status:201});return r&&l.cookies.set("uid",t,{httpOnly:!0,sameSite:"lax",maxAge:31536e3}),l}catch(e){return i.Z.json({error:"Failed to create workout type"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/workout-types/route",pathname:"/api/workout-types",filename:"route",bundlePath:"app/api/workout-types/route"},resolvedPagePath:"C:\\Users\\kittu\\OneDrive\\Desktop\\deficit tracker\\nextjs\\app\\api\\workout-types\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:y,staticGenerationAsyncStorage:k,serverHooks:h,headerHooks:x,staticGenerationBailout:g}=m,w="/api/workout-types/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:k})}},9108:(e,t,r)=>{r.d(t,{_:()=>a});let o=require("@prisma/client"),a=globalThis.prisma??new o.PrismaClient({log:["error"]})},43729:(e,t,r)=>{r.d(t,{u:()=>a});var o=r(32455);function a(e=!1){let t=(0,o.cookies)(),r=t.get("uid")?.value;return r?{userId:r,setCookie:!1}:e?{userId:globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),setCookie:!0}:{userId:null,setCookie:!1}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206,455],()=>r(49483));module.exports=o})();