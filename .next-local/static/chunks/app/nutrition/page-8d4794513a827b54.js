(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[555],{62898:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(2265),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,a)=>{let t=(0,s.forwardRef)(({color:t="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,...m},u)=>(0,s.createElement)("svg",{ref:u,...i,width:r,height:r,stroke:t,strokeWidth:c?24*Number(n)/Number(r):n,className:["lucide",`lucide-${l(e)}`,d].join(" "),...m},[...a.map(([e,a])=>(0,s.createElement)(e,a)),...Array.isArray(o)?o:[o]]));return t.displayName=`${e}`,t}},28203:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},85790:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(62898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},69821:function(e,a,t){Promise.resolve().then(t.bind(t,69062))},69062:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var s=t(57437),i=t(2265),l=t(95710),r=t(62898);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),c=(0,r.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var d=t(85790),o=t(28203);function m(e){let{selectedDate:a}=e,[t,l]=(0,i.useState)([]),[r,n]=(0,i.useState)([]),[c,d]=(0,i.useState)(""),[o,m]=(0,i.useState)(null),[u,x]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),f=async()=>{let e=await fetch("/api/food-entries?date=".concat(a));l(await e.json())};(0,i.useEffect)(()=>{f()},[a]),(0,i.useEffect)(()=>{let e=!0,a=async()=>{let a=await fetch("/api/food-items?q=".concat(encodeURIComponent(c))),t=await a.json();e&&n(t)};return c.length>=1?a():n([]),()=>{e=!1}},[c]);let y=(0,i.useMemo)(()=>t.reduce((e,a)=>e+a.totalCalories,0),[t]),g=async e=>{if(e.preventDefault(),o&&u){p(!0);try{if(!(await fetch("/api/food-entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:a,foodItemId:o.id,quantity:Number(u)})})).ok)throw Error("Failed");d(""),m(null),x(""),await f()}finally{p(!1)}}},v=async e=>{p(!0);try{await fetch("/api/food-entries/".concat(e),{method:"DELETE"}),await f()}finally{p(!1)}};return(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)("form",{onSubmit:g,className:"card grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"label",children:"Food"}),(0,s.jsx)("input",{className:"input-field",placeholder:"Search food...",value:o?o.name:c,onChange:e=>{m(null),d(e.target.value)},autoComplete:"off"}),r.length>0&&!o&&(0,s.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-sm max-h-56 overflow-auto",children:r.map(e=>(0,s.jsxs)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{m(e),d("")},children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.caloriesPer100g," kcal / 100g"]})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Quantity (g)"}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"1",value:u,onChange:e=>x(e.target.value),required:!0})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"btn-primary w-full",disabled:h||!o,children:"Add Entry"})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Entries"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",Math.round(y)," kcal"]})]}),(0,s.jsxs)("div",{className:"mt-3 divide-y",children:[t.map(e=>(0,s.jsxs)("div",{className:"py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.foodItem.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.quantity," g \xb7 ",Math.round(e.totalCalories)," kcal"]})]}),(0,s.jsx)("button",{className:"text-danger-600 hover:underline",onClick:()=>v(e.id),disabled:h,children:"Delete"})]},e.id)),0===t.length&&(0,s.jsx)("div",{className:"text-sm text-gray-500 py-6",children:"No entries for this date."})]})]})]})}var u=t(39551);function x(e){return Math.round(e)}function h(e){let{selectedDate:a}=e,[t,l]=(0,i.useState)(null),[r,n]=(0,i.useState)(0);(0,i.useEffect)(()=>{(async()=>{var e;let[t,s]=await Promise.all([fetch("/api/profile"),fetch("/api/food-entries?date=".concat(a))]),i=await t.json(),r=await s.json();l(null!==(e=null==i?void 0:i.targetCalories)&&void 0!==e?e:null),n(r.reduce((e,a)=>e+(a.totalCalories||0),0))})()},[a]);let c=(0,i.useMemo)(()=>null!=t?t-r:null,[t,r]),d=(0,i.useMemo)(()=>t&&t>0?Math.min(100,Math.max(0,r/t*100)):0,[t,r]);return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"font-semibold mb-4",children:"Daily Progress"}),null==t?(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Set up your profile to get a daily target."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:x(t)}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Target"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:x(r)}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Consumed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(c>=0?"text-success-600":"text-danger-600"),children:x(Math.abs(c))}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:c>=0?"Remaining":"Over"})]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-primary-600 h-3",style:{width:d+"%"}})})]})]})}function p(){let[e,a]=(0,i.useState)("tracker"),[t,r]=(0,i.useState)(new Date().toISOString().split("T")[0]),x=[{id:"tracker",label:"Food Tracker",icon:n},{id:"database",label:"Food Database",icon:c},{id:"progress",label:"Daily Progress",icon:d.Z}];return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nutrition Tracking"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Monitor your daily food intake and hit your calorie targets"})]}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"date",value:t,onChange:e=>r(e.target.value),className:"input-field max-w-xs"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Today: ",new Date().toLocaleDateString()]})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-6",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:x.map(t=>{let i=t.icon;return(0,s.jsxs)("button",{onClick:()=>a(t.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors duration-200 ".concat(e===t.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,s.jsx)(i,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:t.label})]},t.id)})})})}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:["tracker"===e&&(0,s.jsx)(m,{selectedDate:t}),"database"===e&&(0,s.jsx)(u.l,{}),"progress"===e&&(0,s.jsx)(h,{selectedDate:t})]},e)]})})}},39551:function(e,a,t){"use strict";t.d(a,{l:function(){return l}});var s=t(57437),i=t(2265);function l(){let[e,a]=(0,i.useState)([]),[t,l]=(0,i.useState)(""),[r,n]=(0,i.useState)({name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),[c,d]=(0,i.useState)({id:null,name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),[o,m]=(0,i.useState)(!1),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=await fetch("/api/food-items".concat(e?"?q=".concat(encodeURIComponent(e)):""));a(await t.json())};(0,i.useEffect)(()=>{u()},[]);let x=(0,i.useMemo)(()=>e.length,[e]),h=async e=>{e.preventDefault(),m(!0);try{let e={name:r.name.trim(),caloriesPer100g:Number(r.caloriesPer100g),protein:Number(r.protein||0),carbs:Number(r.carbs||0),fat:Number(r.fat||0)};if(!(await fetch("/api/food-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed");n({name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),await u(t)}finally{m(!1)}},p=async e=>{m(!0);try{await fetch("/api/food-items/".concat(e),{method:"DELETE"}),await u(t)}finally{m(!1)}},f=e=>{d({id:e.id,name:e.name,caloriesPer100g:String(e.caloriesPer100g),protein:String(e.protein),carbs:String(e.carbs),fat:String(e.fat)})},y=()=>d({id:null,name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),g=async()=>{if(c.id){m(!0);try{let e={name:c.name.trim(),caloriesPer100g:Number(c.caloriesPer100g),protein:Number(c.protein||0),carbs:Number(c.carbs||0),fat:Number(c.fat||0)};if(!(await fetch("/api/food-items/".concat(c.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed");y(),await u(t)}finally{m(!1)}}};return(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)("form",{onSubmit:h,className:"card grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Name"}),(0,s.jsx)("input",{className:"input-field",value:r.name,onChange:e=>n({...r,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Calories/100g"}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:r.caloriesPer100g,onChange:e=>n({...r,caloriesPer100g:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Protein"}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:r.protein,onChange:e=>n({...r,protein:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Carbs"}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:r.carbs,onChange:e=>n({...r,carbs:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Fat"}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:r.fat,onChange:e=>n({...r,fat:e.target.value})})]}),(0,s.jsx)("div",{className:"md:col-span-5",children:(0,s.jsx)("button",{className:"btn-primary w-full",disabled:o,children:"Add Food"})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[x," items"]}),(0,s.jsx)("input",{placeholder:"Search foods...",className:"input-field sm:max-w-xs",value:t,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&u(t)}})]}),(0,s.jsxs)("div",{className:"mt-4 divide-y",children:[e.map(e=>(0,s.jsx)("div",{className:"py-3",children:c.id===e.id?(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[(0,s.jsx)("input",{className:"input-field",value:c.name,onChange:e=>d({...c,name:e.target.value})}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.caloriesPer100g,onChange:e=>d({...c,caloriesPer100g:e.target.value})}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.protein,onChange:e=>d({...c,protein:e.target.value})}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.carbs,onChange:e=>d({...c,carbs:e.target.value})}),(0,s.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.fat,onChange:e=>d({...c,fat:e.target.value})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",className:"btn-primary",onClick:g,disabled:o,children:"Save"}),(0,s.jsx)("button",{type:"button",className:"btn-secondary",onClick:y,disabled:o,children:"Cancel"})]})]}):(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.caloriesPer100g," kcal / 100g \xb7 P ",e.protein," \xb7 C ",e.carbs," \xb7 F ",e.fat]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{className:"text-primary-600 hover:underline",onClick:()=>f(e),disabled:o,children:"Edit"}),(0,s.jsx)("button",{className:"text-danger-600 hover:underline",onClick:()=>p(e.id),disabled:o,children:"Delete"})]})]})},e.id)),0===e.length&&(0,s.jsx)("div",{className:"text-sm text-gray-500 py-6",children:"No foods found."})]})]})]})}}},function(e){e.O(0,[833,971,938,744],function(){return e(e.s=69821)}),_N_E=e.O()}]);