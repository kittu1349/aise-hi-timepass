(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{86553:function(e,a,s){Promise.resolve().then(s.bind(s,67503))},67503:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return r}});var t=s(57437);s(2265);var n=s(39551);function r(){return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Food Database"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Create and manage your custom foods"})]}),(0,t.jsx)(n.l,{})]})})}},39551:function(e,a,s){"use strict";s.d(a,{l:function(){return r}});var t=s(57437),n=s(2265);function r(){let[e,a]=(0,n.useState)([]),[s,r]=(0,n.useState)(""),[i,l]=(0,n.useState)({name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),[c,o]=(0,n.useState)({id:null,name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),[d,u]=(0,n.useState)(!1),m=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=await fetch("/api/food-items".concat(e?"?q=".concat(encodeURIComponent(e)):""));a(await s.json())};(0,n.useEffect)(()=>{m()},[]);let p=(0,n.useMemo)(()=>e.length,[e]),f=async e=>{e.preventDefault(),u(!0);try{let e={name:i.name.trim(),caloriesPer100g:Number(i.caloriesPer100g),protein:Number(i.protein||0),carbs:Number(i.carbs||0),fat:Number(i.fat||0)};if(!(await fetch("/api/food-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed");l({name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),await m(s)}finally{u(!1)}},x=async e=>{u(!0);try{await fetch("/api/food-items/".concat(e),{method:"DELETE"}),await m(s)}finally{u(!1)}},b=e=>{o({id:e.id,name:e.name,caloriesPer100g:String(e.caloriesPer100g),protein:String(e.protein),carbs:String(e.carbs),fat:String(e.fat)})},g=()=>o({id:null,name:"",caloriesPer100g:"",protein:"",carbs:"",fat:""}),h=async()=>{if(c.id){u(!0);try{let e={name:c.name.trim(),caloriesPer100g:Number(c.caloriesPer100g),protein:Number(c.protein||0),carbs:Number(c.carbs||0),fat:Number(c.fat||0)};if(!(await fetch("/api/food-items/".concat(c.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed");g(),await m(s)}finally{u(!1)}}};return(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsxs)("form",{onSubmit:f,className:"card grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Name"}),(0,t.jsx)("input",{className:"input-field",value:i.name,onChange:e=>l({...i,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Calories/100g"}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:i.caloriesPer100g,onChange:e=>l({...i,caloriesPer100g:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Protein"}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:i.protein,onChange:e=>l({...i,protein:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Carbs"}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:i.carbs,onChange:e=>l({...i,carbs:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"Fat"}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:i.fat,onChange:e=>l({...i,fat:e.target.value})})]}),(0,t.jsx)("div",{className:"md:col-span-5",children:(0,t.jsx)("button",{className:"btn-primary w-full",disabled:d,children:"Add Food"})})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[p," items"]}),(0,t.jsx)("input",{placeholder:"Search foods...",className:"input-field sm:max-w-xs",value:s,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m(s)}})]}),(0,t.jsxs)("div",{className:"mt-4 divide-y",children:[e.map(e=>(0,t.jsx)("div",{className:"py-3",children:c.id===e.id?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[(0,t.jsx)("input",{className:"input-field",value:c.name,onChange:e=>o({...c,name:e.target.value})}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.caloriesPer100g,onChange:e=>o({...c,caloriesPer100g:e.target.value})}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.protein,onChange:e=>o({...c,protein:e.target.value})}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.carbs,onChange:e=>o({...c,carbs:e.target.value})}),(0,t.jsx)("input",{className:"input-field",type:"number",step:"0.1",value:c.fat,onChange:e=>o({...c,fat:e.target.value})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",className:"btn-primary",onClick:h,disabled:d,children:"Save"}),(0,t.jsx)("button",{type:"button",className:"btn-secondary",onClick:g,disabled:d,children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.caloriesPer100g," kcal / 100g \xb7 P ",e.protein," \xb7 C ",e.carbs," \xb7 F ",e.fat]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{className:"text-primary-600 hover:underline",onClick:()=>b(e),disabled:d,children:"Edit"}),(0,t.jsx)("button",{className:"text-danger-600 hover:underline",onClick:()=>x(e.id),disabled:d,children:"Delete"})]})]})},e.id)),0===e.length&&(0,t.jsx)("div",{className:"text-sm text-gray-500 py-6",children:"No foods found."})]})]})]})}},30622:function(e,a,s){"use strict";var t=s(2265),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function o(e,a,s){var t,r={},o=null,d=null;for(t in void 0!==s&&(o=""+s),void 0!==a.key&&(o=""+a.key),void 0!==a.ref&&(d=a.ref),a)i.call(a,t)&&!c.hasOwnProperty(t)&&(r[t]=a[t]);if(e&&e.defaultProps)for(t in a=e.defaultProps)void 0===r[t]&&(r[t]=a[t]);return{$$typeof:n,type:e,key:o,ref:d,props:r,_owner:l.current}}a.Fragment=r,a.jsx=o,a.jsxs=o},57437:function(e,a,s){"use strict";e.exports=s(30622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=86553)}),_N_E=e.O()}]);