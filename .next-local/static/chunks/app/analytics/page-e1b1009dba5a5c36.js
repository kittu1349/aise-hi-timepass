(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{57477:function(e,t,a){Promise.resolve().then(a.bind(a,13184))},13184:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(57437),n=a(2265),r=a(95710),i=a(35048),o=a(3168),l=a(16573),c=a(24235),d=a(50039),u=a(2047),h=a(54153),x=a(19223),m=a(84301);function y(e,t){let a=new Date(e);return a.setDate(a.getDate()+t),a}async function f(e){let t=await fetch("/api/food-entries?date=".concat(e));return t.ok?(await t.json()).reduce((e,t)=>e+(t.totalCalories||0),0):0}function p(){let[e,t]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{var e;let a=await fetch("/api/profile"),s=await a.json(),n=null!==(e=null==s?void 0:s.targetCalories)&&void 0!==e?e:null,r=y(new Date,-6);t(await Promise.all(Array.from({length:7}).map(async(e,t)=>{let a=y(r,t),s=a.toISOString().split("T")[0],i=await f(s);return{date:(0,m.Z)(a,"EEE"),intake:i,target:n}})))})()},[]);let a=(0,n.useMemo)(()=>e,[e]);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Weekly Analytics"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Compare your actual intake vs your target over the past 7 days"})]}),(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(i.h,{width:"100%",height:"100%",children:(0,s.jsxs)(o.w,{data:a,margin:{top:10,right:20,left:0,bottom:0},children:[(0,s.jsx)(l.q,{strokeDasharray:"3 3"}),(0,s.jsx)(c.K,{dataKey:"date"}),(0,s.jsx)(d.B,{}),(0,s.jsx)(u.u,{}),(0,s.jsx)(h.D,{}),(0,s.jsx)(x.x,{type:"monotone",dataKey:"intake",stroke:"#2563eb",strokeWidth:2,name:"Intake"}),(0,s.jsx)(x.x,{type:"monotone",dataKey:"target",stroke:"#16a34a",strokeWidth:2,name:"Target",dot:!1})]})})})})]})})}}},function(e){e.O(0,[833,939,971,938,744],function(){return e(e.s=57477)}),_N_E=e.O()}]);